# ä¸ªäººåšå®¢ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä¸ªäººåšå®¢ç³»ç»Ÿï¼Œå‰ç«¯ä½¿ç”¨Vue3 + Element Plusï¼Œåç«¯ä½¿ç”¨Spring Boot + Kotlin + Gradleã€‚

## åŠŸèƒ½ç‰¹æ€§

### å‰ç«¯åŠŸèƒ½
- ğŸ¨ **æ»¡å±è‡ªæˆ‘ä»‹ç»**ï¼šé¦–å±å±•ç¤ºè…¾è®¯å®‰å“å®¢æˆ·ç«¯å¼€å‘çš„ä¸ªäººä»‹ç»
  - æ¸å˜èƒŒæ™¯è®¾è®¡
  - å¤´åƒå±•ç¤ºï¼ˆå¸¦æµ®åŠ¨åŠ¨ç”»ï¼‰
  - æŠ€èƒ½æ ‡ç­¾å±•ç¤º
  - æ»šåŠ¨æŒ‡ç¤ºå™¨å¼•å¯¼ç”¨æˆ·æŸ¥çœ‹åšå®¢
- ğŸ“ **åšå®¢åˆ—è¡¨**ï¼šæ»šåŠ¨æŸ¥çœ‹åšå®¢æ–‡ç« 
  - æ—¶é—´çº¿æ ·å¼è®¾è®¡
  - æ–‡ç« å¡ç‰‡å±•ç¤ºï¼ˆæ ‡é¢˜ã€æ‘˜è¦ã€å°é¢å›¾ï¼‰
  - æ‚¬åœåŠ¨æ•ˆ
- ğŸ” æ–‡ç« æœç´¢åŠŸèƒ½
- ğŸ“– æ–‡ç« è¯¦æƒ…é¡µé¢ï¼ˆæ”¯æŒMarkdownæ¸²æŸ“ï¼‰
- ğŸ‘€ æ–‡ç« æµè§ˆé‡ç»Ÿè®¡
- ğŸ“± å“åº”å¼è®¾è®¡ï¼ˆé€‚é…ç§»åŠ¨ç«¯ï¼‰

### åå°ç®¡ç†ç³»ç»Ÿ
- ğŸ” **ç®¡ç†å‘˜ç™»å½•è®¤è¯**
  - JWT Tokenè®¤è¯æœºåˆ¶
  - æ”¯æŒå¤šä¸ªç®¡ç†å‘˜è´¦å·
  - å¯†ç BCryptåŠ å¯†å­˜å‚¨
  - åå°å…¥å£å®Œå…¨éšè—ï¼ˆæ— ä»»ä½•å¯è§å…¥å£ï¼‰
- ğŸ›¡ï¸ **è·¯ç”±å®ˆå«ä¿æŠ¤**
  - æ‰€æœ‰åå°è·¯ç”±éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®
  - æœªç™»å½•è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
  - Tokenè¿‡æœŸè‡ªåŠ¨é€€å‡º
- ğŸ“‹ æ–‡ç« åˆ—è¡¨ç®¡ç†
- âœï¸ Markdownç¼–è¾‘å™¨ï¼ˆå®æ—¶é¢„è§ˆï¼‰
- ğŸ–¼ï¸ å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- ğŸ“¤ æ–‡ç« å‘å¸ƒ/è‰ç¨¿ç®¡ç†
- ğŸ—‘ï¸ æ–‡ç« åˆ é™¤åŠŸèƒ½
- ğŸ“Š **è®¿é—®æ—¥å¿—æŸ¥çœ‹**
  - è®°å½•æ‰€æœ‰è®¿é—®è¯·æ±‚ï¼ˆIPã€URLã€æ—¶é—´ã€å“åº”çŠ¶æ€ç­‰ï¼‰
  - æ”¯æŒæŒ‰IPæˆ–URLæœç´¢
  - åˆ†é¡µæµè§ˆå’Œæ‰¹é‡ç®¡ç†

### åç«¯åŠŸèƒ½
- RESTful APIæ¥å£
- MySQLæ•°æ®åº“å­˜å‚¨
- JWTèº«ä»½è®¤è¯
- è®¿é—®æ—¥å¿—è®°å½•ï¼ˆæ‹¦æˆªå™¨ï¼‰
- å›¾ç‰‡ä¸Šä¼ å’Œå­˜å‚¨
- åˆ†é¡µæŸ¥è¯¢æ”¯æŒ
- æ–‡ç« çŠ¶æ€ç®¡ç†

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- Vue 3
- TypeScript
- Element Plus
- Vue Router
- Axios
- Marked (Markdownè§£æ)
- Highlight.js (ä»£ç é«˜äº®)
- Vite

### åç«¯
- Spring Boot 3.2.0
- Kotlin 1.9.20
- Spring Data JPA
- Spring Security
- JWT (JSON Web Token)
- Gradle Kotlin DSL
- MySQL 8.0

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ frontend/                 # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/             # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®ï¼ˆå«è·¯ç”±å®ˆå«ï¼‰
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/       # åå°ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PostList.vue      # æ–‡ç« åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PostEditor.vue    # æ–‡ç« ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AccessLogs.vue    # è®¿é—®æ—¥å¿—
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.vue     # é¦–é¡µï¼ˆè‡ªæˆ‘ä»‹ç»+åšå®¢åˆ—è¡¨ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ PostDetail.vue  # æ–‡ç« è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue    # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ Admin.vue    # åå°å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ App.vue          # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ src/                      # åç«¯é¡¹ç›®ï¼ˆKotlinï¼‰
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ kotlin/com/blog/
â”‚       â”‚   â”œâ”€â”€ entity/      # å®ä½“ç±»
â”‚       â”‚   â”‚   â”œâ”€â”€ BlogPost.kt
â”‚       â”‚   â”‚   â”œâ”€â”€ BlogImage.kt
â”‚       â”‚   â”‚   â”œâ”€â”€ AccessLog.kt
â”‚       â”‚   â”‚   â””â”€â”€ AdminUser.kt
â”‚       â”‚   â”œâ”€â”€ repository/  # æ•°æ®è®¿é—®å±‚
â”‚       â”‚   â”œâ”€â”€ service/     # ä¸šåŠ¡é€»è¾‘å±‚
â”‚       â”‚   â”œâ”€â”€ controller/  # æ§åˆ¶å™¨
â”‚       â”‚   â”œâ”€â”€ config/      # é…ç½®ç±»
â”‚       â”‚   â”‚   â”œâ”€â”€ WebConfig.kt
â”‚       â”‚   â”‚   â””â”€â”€ SecurityConfig.kt
â”‚       â”‚   â”œâ”€â”€ interceptor/ # æ‹¦æˆªå™¨
â”‚       â”‚   â”‚   â””â”€â”€ AccessLogInterceptor.kt
â”‚       â”‚   â”œâ”€â”€ util/        # å·¥å…·ç±»
â”‚       â”‚   â”‚   â””â”€â”€ JwtUtil.kt
â”‚       â”‚   â””â”€â”€ BlogApplication.kt
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application.yml
â”‚
â”œâ”€â”€ build.gradle.kts          # Gradleé…ç½®
â”œâ”€â”€ settings.gradle.kts
â”œâ”€â”€ gradle.properties
â”œâ”€â”€ Dockerfile                # Dockeré…ç½®
â”œâ”€â”€ init-admin.sql            # åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·
â””â”€â”€ README.md
```

## å¿«é€Ÿå¼€å§‹

### å‰ç«¯å¼€å‘

```bash
cd frontend
npm install
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨ http://localhost:3000

### åç«¯å¼€å‘

1. ç¡®ä¿MySQLæ•°æ®åº“å·²å¯åŠ¨
2. é…ç½®æ•°æ®åº“è¿æ¥ï¼ˆé€šè¿‡ç¯å¢ƒå˜é‡æˆ–ä¿®æ”¹application.ymlï¼‰
3. è¿è¡ŒSpring Bootåº”ç”¨

```bash
./gradlew bootRun
```

åç«¯å°†è¿è¡Œåœ¨ http://localhost:8080

### ç¯å¢ƒå˜é‡

åç«¯éœ€è¦ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- `DB_HOST`: æ•°æ®åº“ä¸»æœºåœ°å€ï¼ˆé»˜è®¤ï¼š11.142.154.110ï¼‰
- `DB_PORT`: æ•°æ®åº“ç«¯å£ï¼ˆé»˜è®¤ï¼š3306ï¼‰
- `DB_NAME`: æ•°æ®åº“åç§°ï¼ˆé»˜è®¤ï¼šn6q4bxulï¼‰
- `DB_USERNAME`: æ•°æ®åº“ç”¨æˆ·åï¼ˆé»˜è®¤ï¼šwith_jxkywmtimbgeuddjï¼‰
- `DB_PASSWORD`: æ•°æ®åº“å¯†ç ï¼ˆé»˜è®¤ï¼šL^Ytk5H%ioxFz9ï¼‰

### æ•°æ®åº“è¡¨ç»“æ„

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹è¡¨ï¼š

1. `blog_post` - åšå®¢æ–‡ç« è¡¨
   - id, title, content, summary, cover_image
   - author, status, view_count
   - created_at, updated_at, published_at

2. `blog_image` - å›¾ç‰‡è¡¨
   - id, file_name, file_path, file_size
   - content_type, created_at

3. `access_log` - è®¿é—®æ—¥å¿—è¡¨
   - id, ip_address, request_url, request_method
   - user_agent, referer, access_time
   - response_status, response_time

4. `admin_user` - ç®¡ç†å‘˜ç”¨æˆ·è¡¨
   - id, username, password, nickname, email
   - enabled, created_at, last_login_at

### åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·

é¦–æ¬¡ä½¿ç”¨éœ€è¦åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·ï¼š

```bash
# æ–¹å¼1ï¼šæ‰§è¡ŒSQLè„šæœ¬
mysql -h 11.142.154.110 -u with_jxkywmtimbgeuddj -p n6q4bxul < init-admin.sql

# æ–¹å¼2ï¼šé€šè¿‡APIæ³¨å†Œï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123","nickname":"ç®¡ç†å‘˜"}'
```

**é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼š**
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`

**âš ï¸ é‡è¦ï¼šé¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼**

## APIæ¥å£

### è®¤è¯æ¥å£

- `POST /api/auth/login` - ç®¡ç†å‘˜ç™»å½•
- `POST /api/auth/register` - æ³¨å†Œç®¡ç†å‘˜
- `POST /api/auth/validate` - éªŒè¯Token

### æ–‡ç« æ¥å£

- `GET /api/posts` - è·å–æ‰€æœ‰æ–‡ç« ï¼ˆåˆ†é¡µï¼‰
- `GET /api/posts/published` - è·å–å·²å‘å¸ƒæ–‡ç« ï¼ˆåˆ†é¡µï¼‰
- `GET /api/posts/{id}` - è·å–æ–‡ç« è¯¦æƒ…
- `GET /api/posts/{id}/view` - æŸ¥çœ‹æ–‡ç« ï¼ˆå¢åŠ æµè§ˆé‡ï¼‰
- `POST /api/posts` - åˆ›å»ºæ–‡ç«  ğŸ”’
- `PUT /api/posts/{id}` - æ›´æ–°æ–‡ç«  ğŸ”’
- `PUT /api/posts/{id}/publish` - å‘å¸ƒæ–‡ç«  ğŸ”’
- `DELETE /api/posts/{id}` - åˆ é™¤æ–‡ç«  ğŸ”’
- `GET /api/posts/search` - æœç´¢æ–‡ç« 

### å›¾ç‰‡æ¥å£

- `POST /api/upload` - ä¸Šä¼ å›¾ç‰‡
- `GET /api/images/{filename}` - è·å–å›¾ç‰‡

### è®¿é—®æ—¥å¿—æ¥å£ ğŸ”’

- `GET /api/admin/access-logs` - è·å–æ‰€æœ‰è®¿é—®æ—¥å¿—
- `GET /api/admin/access-logs/by-ip` - æŒ‰IPæŸ¥è¯¢æ—¥å¿—
- `GET /api/admin/access-logs/by-url` - æŒ‰URLæŸ¥è¯¢æ—¥å¿—
- `DELETE /api/admin/access-logs/{id}` - åˆ é™¤å•æ¡æ—¥å¿—
- `DELETE /api/admin/access-logs/clear` - æ¸…ç©ºæ‰€æœ‰æ—¥å¿—

ğŸ”’ è¡¨ç¤ºéœ€è¦ç®¡ç†å‘˜ç™»å½•è®¤è¯

## ä½¿ç”¨è¯´æ˜

### è®¿é—®åå°ç®¡ç†

**âš ï¸ é‡è¦ï¼šåå°ç®¡ç†å…¥å£å·²å®Œå…¨éšè—ï¼Œé¦–é¡µæ²¡æœ‰ä»»ä½•å…¥å£é“¾æ¥æˆ–æŒ‰é’®**

è®¿é—®æ–¹å¼ï¼š
1. ç›´æ¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š`http://localhost:3000/login`
2. è¾“å…¥ç®¡ç†å‘˜è´¦å·å¯†ç 
3. ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°åå°ç®¡ç†ç³»ç»Ÿ

**å®‰å…¨ç‰¹æ€§ï¼š**
- åå°å…¥å£å®Œå…¨éšè—ï¼Œæ™®é€šç”¨æˆ·æ— æ³•å‘ç°
- æ‰€æœ‰åå°è·¯ç”±éƒ½æœ‰è·¯ç”±å®ˆå«ä¿æŠ¤
- æœªç™»å½•ç”¨æˆ·è®¿é—®åå°ä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
- JWT Tokenè®¤è¯ï¼Œç¡®ä¿å®‰å…¨æ€§

### åˆ›å»ºæ–‡ç« 

1. è¿›å…¥åå°ç®¡ç†ç³»ç»Ÿ
2. ç‚¹å‡»"æ–°å»ºæ–‡ç« "
3. å¡«å†™æ ‡é¢˜ã€ä½œè€…ã€æ‘˜è¦ç­‰ä¿¡æ¯
4. ä½¿ç”¨Markdownç¼–è¾‘å™¨ç¼–å†™å†…å®¹
5. å¯ä»¥ä¸Šä¼ å°é¢å›¾å’Œæ’å…¥å›¾ç‰‡
6. ä¿å­˜ä¸ºè‰ç¨¿æˆ–ç›´æ¥å‘å¸ƒ

### æŸ¥çœ‹è®¿é—®æ—¥å¿—

**ç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•æ‰€æœ‰è®¿é—®è¯·æ±‚ï¼ŒåŒ…æ‹¬ï¼š**
- è®¿é—®æ—¶é—´
- è®¿é—®è€…IPåœ°å€
- è¯·æ±‚URL
- è¯·æ±‚æ–¹æ³•ï¼ˆGET/POSTç­‰ï¼‰
- User Agentï¼ˆæµè§ˆå™¨ä¿¡æ¯ï¼‰
- Refererï¼ˆæ¥æºé¡µé¢ï¼‰
- å“åº”çŠ¶æ€ç 
- å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

**æŸ¥çœ‹æ–¹å¼ï¼š**
1. ç™»å½•åå°ç®¡ç†ç³»ç»Ÿ
2. ç‚¹å‡»å·¦ä¾§èœå•"è®¿é—®æ—¥å¿—"
3. å¯ä»¥æŸ¥çœ‹æ‰€æœ‰è®¿é—®è®°å½•çš„è¯¦ç»†ä¿¡æ¯
4. æ”¯æŒæŒ‰IPåœ°å€æˆ–URLæœç´¢è¿‡æ»¤
5. æ”¯æŒåˆ†é¡µæµè§ˆ
6. å¯ä»¥åˆ é™¤å•æ¡æ—¥å¿—æˆ–æ¸…ç©ºæ‰€æœ‰æ—¥å¿—

**åº”ç”¨åœºæ™¯ï¼š**
- å®‰å…¨å®¡è®¡ï¼šè¿½è¸ªå¯ç–‘è®¿é—®
- æµé‡åˆ†æï¼šäº†è§£è®¿é—®è¶‹åŠ¿
- é—®é¢˜æ’æŸ¥ï¼šå®šä½å¼‚å¸¸è¯·æ±‚
- ç”¨æˆ·è¡Œä¸ºåˆ†æï¼šäº†è§£ç”¨æˆ·è®¿é—®è·¯å¾„

### Markdownç¼–è¾‘å™¨

ç¼–è¾‘å™¨æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š
- å®æ—¶é¢„è§ˆ
- å·¥å…·æ å¿«æ·æŒ‰é’®ï¼ˆåŠ ç²—ã€æ–œä½“ã€æ ‡é¢˜ã€åˆ—è¡¨ç­‰ï¼‰
- å›¾ç‰‡ä¸Šä¼ å’Œæ’å…¥
- ä»£ç é«˜äº®
- è¡¨æ ¼ã€å¼•ç”¨ç­‰Markdownè¯­æ³•

## éƒ¨ç½²

### Dockeréƒ¨ç½²

```bash
# æ„å»ºåç«¯é•œåƒ
./gradlew bootJar
docker build -t blog-backend .

# è¿è¡Œå®¹å™¨
docker run -d -p 8080:8080 \
  -e DB_HOST=your_db_host \
  -e DB_PORT=3306 \
  -e DB_NAME=your_db_name \
  -e DB_USERNAME=your_username \
  -e DB_PASSWORD=your_password \
  blog-backend
```

### å‰ç«¯æ„å»º

```bash
cd frontend
npm run build
```

æ„å»ºäº§ç‰©åœ¨ `frontend/dist` ç›®å½•ä¸‹ï¼Œå¯ä»¥éƒ¨ç½²åˆ°ä»»ä½•é™æ€æœåŠ¡å™¨ã€‚

## å®‰å…¨è¯´æ˜

1. **JWT Token**ï¼šç”¨æˆ·ç™»å½•åä¼šè·å¾—JWT Tokenï¼Œå­˜å‚¨åœ¨localStorageä¸­
2. **è·¯ç”±å®ˆå«**ï¼šå‰ç«¯ä½¿ç”¨Vue Routerå®ˆå«ä¿æŠ¤ç®¡ç†åå°è·¯ç”±
3. **å¯†ç åŠ å¯†**ï¼šä½¿ç”¨BCryptç®—æ³•åŠ å¯†å­˜å‚¨å¯†ç 
4. **è®¿é—®æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰è®¿é—®è¯·æ±‚ï¼Œä¾¿äºå®‰å…¨å®¡è®¡
5. **CORSé…ç½®**ï¼šå·²é…ç½®è·¨åŸŸè®¿é—®æ§åˆ¶

## æŠ€æœ¯äº®ç‚¹

1. âœ… **Kotlin + Gradle**ï¼šä½¿ç”¨ç°ä»£åŒ–çš„Kotlinè¯­è¨€å’ŒGradle Kotlin DSLæ„å»º
2. âœ… **JWTè®¤è¯**ï¼šæ— çŠ¶æ€çš„Tokenè®¤è¯æœºåˆ¶
3. âœ… **è®¿é—®æ—¥å¿—**ï¼šè‡ªåŠ¨è®°å½•æ‰€æœ‰è®¿é—®è¯·æ±‚ï¼ˆæ‹¦æˆªå™¨å®ç°ï¼‰
4. âœ… **è·¯ç”±å®ˆå«**ï¼šå‰ç«¯è·¯ç”±çº§åˆ«çš„æƒé™æ§åˆ¶
5. âœ… **éšè—åå°å…¥å£**ï¼šé¦–é¡µæ— ä»»ä½•ç®¡ç†å…¥å£ï¼Œæå‡å®‰å…¨æ€§
6. âœ… **æ»¡å±è‡ªæˆ‘ä»‹ç»**ï¼šç°ä»£åŒ–çš„é¦–é¡µè®¾è®¡ï¼Œæ»šåŠ¨æŸ¥çœ‹åšå®¢
7. âœ… **å“åº”å¼è®¾è®¡**ï¼šé€‚é…å„ç§å±å¹•å°ºå¯¸
8. âœ… **Markdownæ”¯æŒ**ï¼šå®Œæ•´çš„Markdownç¼–è¾‘å’Œæ¸²æŸ“
9. âœ… **å›¾ç‰‡ä¸Šä¼ **ï¼šæ”¯æŒå›¾ç‰‡ä¸Šä¼ å’Œç®¡ç†
10. âœ… **å¤šç®¡ç†å‘˜æ”¯æŒ**ï¼šå¯åˆ›å»ºå¤šä¸ªç®¡ç†å‘˜è´¦å·

## è®¸å¯è¯

MIT License
